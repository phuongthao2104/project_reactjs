{"ast":null,"code":"import React, { useState, createContext, useContext, useReducer, useEffect } from 'react';\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction useLocalStorage(key, initialValue) {\n  var _useState = useState(function () {\n    try {\n      var item = typeof window !== 'undefined' && window.localStorage.getItem(key);\n      return item ? item : initialValue;\n    } catch (error) {\n      return initialValue;\n    }\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      storedValue = _useState2[0],\n      setStoredValue = _useState2[1];\n\n  var setValue = function setValue(value) {\n    try {\n      var valueToStore = value instanceof Function ? value(storedValue) : value;\n      setStoredValue(valueToStore);\n      window.localStorage.setItem(key, valueToStore);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  return [storedValue, setValue];\n}\n\nvar SET_ITEMS = \"SET_ITEMS\";\nvar ADD_ITEM = \"ADD_ITEM\";\nvar UPDATE_ITEM = \"UPDATE_ITEM\";\nvar REMOVE_ITEM = \"REMOVE_ITEM\";\nvar EMPTY_CART = \"EMPTY_CART\";\nvar CartContext = createContext();\nvar initialState = {\n  items: [],\n  totalItems: 0,\n  totalUniqueItems: 0,\n  isEmpty: true\n};\n\nvar useCart = function useCart() {\n  return useContext(CartContext);\n};\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case SET_ITEMS:\n      return generateCartState(state, action.payload);\n\n    case ADD_ITEM:\n      {\n        var items = [].concat(_toConsumableArray(state.items), [action.payload]);\n        return generateCartState(state, items);\n      }\n\n    case UPDATE_ITEM:\n      {\n        var _items = state.items.map(function (item) {\n          if (item.id !== action.id) return item;\n          return _objectSpread2(_objectSpread2({}, item), action.payload);\n        });\n\n        return generateCartState(state, _items);\n      }\n\n    case REMOVE_ITEM:\n      {\n        var _items2 = state.items.filter(function (i) {\n          return i.id !== action.id;\n        });\n\n        return generateCartState(state, _items2);\n      }\n\n    case EMPTY_CART:\n      return initialState;\n\n    default:\n      throw new Error(\"No action specified\");\n  }\n}\n\nvar generateCartState = function generateCartState() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var items = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var totalUniqueItems = calculateUniqueItems(items);\n  var isEmpty = totalUniqueItems === 0;\n  return _objectSpread2(_objectSpread2(_objectSpread2({}, initialState), state), {}, {\n    items: calculateItemTotals(items),\n    totalItems: calculateTotalItems(items),\n    totalUniqueItems: totalUniqueItems,\n    cartTotal: calculateCartTotal(items),\n    isEmpty: isEmpty\n  });\n};\n\nvar calculateItemTotals = function calculateItemTotals() {\n  var items = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return items.map(function (item) {\n    return _objectSpread2({\n      itemTotal: item.price * item.quantity\n    }, item);\n  });\n};\n\nvar calculateCartTotal = function calculateCartTotal() {\n  var items = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return items.reduce(function (total, item) {\n    return total + item.quantity * item.price;\n  }, 0);\n};\n\nvar calculateTotalItems = function calculateTotalItems() {\n  var items = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return items.reduce(function (sum, item) {\n    return sum + item.quantity;\n  }, 0);\n};\n\nvar calculateUniqueItems = function calculateUniqueItems() {\n  var items = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return items.length;\n};\n\nfunction CartProvider(_ref) {\n  var children = _ref.children,\n      _ref$id = _ref.id,\n      id = _ref$id === void 0 ? _toConsumableArray(Array(12)).map(function (i) {\n    return (~~(Math.random() * 36)).toString(36);\n  }).join(\"\") : _ref$id,\n      _ref$defaultItems = _ref.defaultItems,\n      defaultItems = _ref$defaultItems === void 0 ? [] : _ref$defaultItems,\n      onSetItems = _ref.onSetItems,\n      onItemAdd = _ref.onItemAdd,\n      onItemUpdate = _ref.onItemUpdate,\n      onItemRemove = _ref.onItemRemove;\n\n  var _useLocalStorage = useLocalStorage(\"react-use-cart\", JSON.stringify(_objectSpread2(_objectSpread2({\n    id: id\n  }, initialState), {}, {\n    items: defaultItems\n  }))),\n      _useLocalStorage2 = _slicedToArray(_useLocalStorage, 2),\n      savedCart = _useLocalStorage2[0],\n      saveCart = _useLocalStorage2[1];\n\n  var _useReducer = useReducer(reducer, JSON.parse(savedCart)),\n      _useReducer2 = _slicedToArray(_useReducer, 2),\n      state = _useReducer2[0],\n      dispatch = _useReducer2[1];\n\n  useEffect(function () {\n    saveCart(JSON.stringify(state));\n  }, [state, saveCart]);\n\n  var setItems = function setItems(items) {\n    dispatch({\n      type: SET_ITEMS,\n      payload: items\n    });\n    onSetItems && onSetItems(items);\n  };\n\n  var addItem = function addItem(item) {\n    var quantity = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n    if (quantity <= 0) return;\n    if (!item.id) throw new Error(\"You must provide an `id` for items\");\n    var currentItem = state.items.find(function (i) {\n      return i.id === item.id;\n    });\n    if (!currentItem & !item.price) throw new Error(\"You must pass a `price` for new items\");\n\n    if (!currentItem) {\n      var _payload = _objectSpread2(_objectSpread2({}, item), {}, {\n        quantity: quantity\n      });\n\n      onItemAdd && onItemAdd(_payload);\n      return dispatch({\n        type: ADD_ITEM,\n        payload: _payload\n      });\n    }\n\n    var payload = _objectSpread2(_objectSpread2({}, item), {}, {\n      quantity: currentItem.quantity + quantity\n    });\n\n    dispatch({\n      type: UPDATE_ITEM,\n      id: item.id,\n      payload: payload\n    });\n    onItemUpdate && onItemUpdate(payload);\n  };\n\n  var updateItem = function updateItem(id, payload) {\n    dispatch({\n      type: UPDATE_ITEM,\n      id: id,\n      payload: payload\n    });\n    onItemUpdate && onItemUpdate(payload);\n  };\n\n  var updateItemQuantity = function updateItemQuantity(id, quantity) {\n    if (quantity <= 0) {\n      onItemRemove && onItemRemove(id);\n      return dispatch({\n        type: REMOVE_ITEM,\n        id: id\n      });\n    }\n\n    var currentItem = state.items.find(function (item) {\n      return item.id === id;\n    });\n    if (!currentItem) throw new Error(\"No such item to update\");\n\n    var payload = _objectSpread2(_objectSpread2({}, currentItem), {}, {\n      quantity: quantity\n    });\n\n    dispatch({\n      type: UPDATE_ITEM,\n      id: id,\n      payload: payload\n    });\n    onItemUpdate && onItemUpdate(payload);\n  };\n\n  var removeItem = function removeItem(id) {\n    dispatch({\n      type: REMOVE_ITEM,\n      id: id\n    });\n    onItemRemove && onItemRemove(id);\n  };\n\n  var emptyCart = function emptyCart() {\n    return dispatch({\n      type: EMPTY_CART\n    });\n  };\n\n  var getItem = function getItem(id) {\n    return state.items.find(function (i) {\n      return i.id === id;\n    });\n  };\n\n  var inCart = function inCart(id) {\n    return state.items.some(function (i) {\n      return i.id === id;\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(CartContext.Provider, {\n    value: _objectSpread2(_objectSpread2({}, state), {}, {\n      getItem: getItem,\n      inCart: inCart,\n      setItems: setItems,\n      addItem: addItem,\n      updateItem: updateItem,\n      updateItemQuantity: updateItemQuantity,\n      removeItem: removeItem,\n      emptyCart: emptyCart\n    })\n  }, children);\n}\n\nexport { CartProvider, initialState, useCart };","map":{"version":3,"mappings":"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","names":["useLocalStorage","key","initialValue","useState","item","window","localStorage","getItem","error","storedValue","setStoredValue","setValue","valueToStore","value","Function","setItem","console","log","SET_ITEMS","ADD_ITEM","UPDATE_ITEM","REMOVE_ITEM","EMPTY_CART","CartContext","createContext","initialState","items","totalItems","totalUniqueItems","isEmpty","useCart","useContext","reducer","state","action","type","generateCartState","payload","map","id","filter","i","Error","calculateUniqueItems","calculateItemTotals","calculateTotalItems","cartTotal","calculateCartTotal","itemTotal","price","quantity","reduce","total","sum","length","CartProvider","children","_toConsumableArray","Array","Math","random","toString","join","defaultItems","onSetItems","onItemAdd","onItemUpdate","onItemRemove","JSON","stringify","savedCart","saveCart","useReducer","parse","dispatch","useEffect","setItems","addItem","currentItem","find","updateItem","updateItemQuantity","removeItem","emptyCart","inCart","some","React","Provider"],"sources":["C:\\xampp\\htdocs\\project_reactjs\\node_modules\\react-use-cart\\src\\useLocalStorage.js","C:\\xampp\\htdocs\\project_reactjs\\node_modules\\react-use-cart\\src\\index.js"],"sourcesContent":["import { useState } from 'react'\n\nexport default function useLocalStorage(key, initialValue) {\n  const [storedValue, setStoredValue] = useState(() => {\n    try {\n      const item =\n        typeof window !== 'undefined' && window.localStorage.getItem(key)\n\n      return item ? item : initialValue\n    } catch (error) {\n      return initialValue\n    }\n  })\n\n  const setValue = value => {\n    try {\n      const valueToStore =\n        value instanceof Function ? value(storedValue) : value\n\n      setStoredValue(valueToStore)\n\n      window.localStorage.setItem(key, valueToStore)\n    } catch (error) {\n      console.log(error)\n    }\n  }\n\n  return [storedValue, setValue]\n}\n","import React, { createContext, useContext, useReducer, useEffect } from \"react\";\n\nimport useLocalStorage from \"./useLocalStorage\";\n\nconst SET_ITEMS = \"SET_ITEMS\";\nconst ADD_ITEM = \"ADD_ITEM\";\nconst UPDATE_ITEM = \"UPDATE_ITEM\";\nconst REMOVE_ITEM = \"REMOVE_ITEM\";\nconst EMPTY_CART = \"EMPTY_CART\";\n\nconst CartContext = createContext();\n\nexport const initialState = {\n  items: [],\n  totalItems: 0,\n  totalUniqueItems: 0,\n  isEmpty: true,\n};\n\nexport const useCart = () => useContext(CartContext);\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case SET_ITEMS:\n      return generateCartState(state, action.payload);\n\n    case ADD_ITEM: {\n      const items = [...state.items, action.payload];\n\n      return generateCartState(state, items);\n    }\n\n    case UPDATE_ITEM: {\n      const items = state.items.map((item) => {\n        if (item.id !== action.id) return item;\n\n        return {\n          ...item,\n          ...action.payload,\n        };\n      });\n\n      return generateCartState(state, items);\n    }\n\n    case REMOVE_ITEM: {\n      const items = state.items.filter((i) => i.id !== action.id);\n\n      return generateCartState(state, items);\n    }\n\n    case EMPTY_CART:\n      return initialState;\n\n    default:\n      throw new Error(\"No action specified\");\n  }\n}\n\nconst generateCartState = (state = initialState, items = []) => {\n  const totalUniqueItems = calculateUniqueItems(items);\n  const isEmpty = totalUniqueItems === 0;\n\n  return {\n    ...initialState,\n    ...state,\n    items: calculateItemTotals(items),\n    totalItems: calculateTotalItems(items),\n    totalUniqueItems,\n    cartTotal: calculateCartTotal(items),\n    isEmpty,\n  };\n};\n\nconst calculateItemTotals = (items = []) =>\n  items.map((item) => ({\n    itemTotal: item.price * item.quantity,\n    ...item,\n  }));\n\nconst calculateCartTotal = (items = []) =>\n  items.reduce((total, item) => total + item.quantity * item.price, 0);\n\nconst calculateTotalItems = (items = []) =>\n  items.reduce((sum, item) => sum + item.quantity, 0);\n\nconst calculateUniqueItems = (items = []) => items.length;\n\nexport function CartProvider({\n  children,\n  id = [...Array(12)]\n    .map((i) => (~~(Math.random() * 36)).toString(36))\n    .join(\"\"),\n  defaultItems = [],\n  onSetItems,\n  onItemAdd,\n  onItemUpdate,\n  onItemRemove,\n}) {\n  const [savedCart, saveCart] = useLocalStorage(\n    \"react-use-cart\",\n    JSON.stringify({\n      id,\n      ...initialState,\n      items: defaultItems,\n    })\n  );\n\n  const [state, dispatch] = useReducer(reducer, JSON.parse(savedCart));\n\n  useEffect(() => {\n    saveCart(JSON.stringify(state));\n  }, [state, saveCart]);\n\n  const setItems = (items) => {\n    dispatch({\n      type: SET_ITEMS,\n      payload: items,\n    });\n\n    onSetItems && onSetItems(items);\n  };\n\n  const addItem = (item, quantity = 1) => {\n    if (quantity <= 0) return;\n    if (!item.id) throw new Error(\"You must provide an `id` for items\");\n\n    const currentItem = state.items.find((i) => i.id === item.id);\n\n    if (!currentItem & !item.price)\n      throw new Error(\"You must pass a `price` for new items\");\n\n    if (!currentItem) {\n      const payload = { ...item, quantity };\n      onItemAdd && onItemAdd(payload);\n      return dispatch({ type: ADD_ITEM, payload });\n    }\n\n    const payload = { ...item, quantity: currentItem.quantity + quantity };\n\n    dispatch({\n      type: UPDATE_ITEM,\n      id: item.id,\n      payload,\n    });\n\n    onItemUpdate && onItemUpdate(payload);\n  };\n\n  const updateItem = (id, payload) => {\n    dispatch({ type: UPDATE_ITEM, id, payload });\n    onItemUpdate && onItemUpdate(payload);\n  };\n\n  const updateItemQuantity = (id, quantity) => {\n    if (quantity <= 0) {\n      onItemRemove && onItemRemove(id);\n      return dispatch({ type: REMOVE_ITEM, id });\n    }\n\n    const currentItem = state.items.find((item) => item.id === id);\n\n    if (!currentItem) throw new Error(\"No such item to update\");\n\n    const payload = { ...currentItem, quantity };\n\n    dispatch({\n      type: UPDATE_ITEM,\n      id,\n      payload,\n    });\n\n    onItemUpdate && onItemUpdate(payload);\n  };\n\n  const removeItem = (id) => {\n    dispatch({ type: REMOVE_ITEM, id });\n\n    onItemRemove && onItemRemove(id);\n  };\n\n  const emptyCart = () =>\n    dispatch({\n      type: EMPTY_CART,\n    });\n\n  const getItem = (id) => state.items.find((i) => i.id === id);\n\n  const inCart = (id) => state.items.some((i) => i.id === id);\n\n  return (\n    <CartContext.Provider\n      value={{\n        ...state,\n        getItem,\n        inCart,\n        setItems,\n        addItem,\n        updateItem,\n        updateItemQuantity,\n        removeItem,\n        emptyCart,\n      }}\n    >\n      {children}\n    </CartContext.Provider>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}